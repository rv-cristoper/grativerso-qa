import{j as o,c,v as po,E as x,G as _,b as e,h as vo,g as xo,n as go,R as ho}from"../shared/global.js";import"../shared/index2.js";import{R as uo}from"../shared/index.js";import{I as fo,u as Co}from"../shared/useDataCartilla.js";import{N as Q}from"../shared/NavHeader.js";import{L as bo}from"../shared/LoaderDisc.js";import{T as jo}from"../shared/TabCart.js";import{N as z}from"../shared/NavHeaderWithClose.js";import{E as W,L as No}from"../shared/caf.js";import{E as wo}from"../shared/PromoFin2.js";import{g as _o}from"../shared/getInfoFromSessionStorage.js";import{C as Ao}from"../shared/useResultadosAnteriores.js";import{u as Eo}from"../shared/useQuery.js";import{Q as Fo}from"../shared/useBaseQuery.js";import{Q as So}from"../shared/queryClient.js";import"../shared/Button.js";import"../shared/PaginationArrowIcon.js";import"../shared/useWantToValidate.js";import"../shared/useMutation.js";import"../shared/CloseIcon.js";import"../shared/ELottery.js";import"../shared/react-tooltip.min.js";import"../shared/TableItems.js";import"../shared/carousel.js";import"../shared/embla-carousel-react.esm.js";import"../shared/index3.js";import"../shared/helpers2.js";import"../shared/Table2.js";import"../shared/helpers.js";import"../shared/useWindowsSize.js";const yo="_cartillaContainer_1dj40_2",To={cartillaContainer:yo},Io=({options:s,fetchMoreData:t,hasNextPage:p,isLoading:m})=>o.jsx("div",{className:"max-md:promos-v3-px-11 max-md:promos-v3-py-5  promos-v3-p-5 promos-v3-flex-1",children:o.jsx(fo,{dataLength:s.length,next:t,hasMore:p,loader:m?o.jsx("span",{className:"promos-v3-text-white",children:"Cargando..."}):o.jsx(o.Fragment,{}),className:c(To.cartillaContainer,"promos-v3-flex promos-v3-gap-4 promos-v3-flex-wrap promos-v3-max-w-[1232px] md:promos-v3-mx-auto"),children:s==null?void 0:s.map((a,i)=>o.jsx("span",{className:"promos-v3-text-sm promos-v3-w-[77px] promos-v3-text-white",children:a},i))})}),Oo=({opciones:s=0,numberSearch:t,changeInputSearch:p})=>{function m(){if(t.length>0)p(""),_.Etiquetado({categoria:"visor de opciones de sorteos",accion:"click",etiqueta:"limpiar busqueda",value:0});else return}return o.jsx("div",{className:c("promos-v3-bg-[#FFFFFF0D] promos-v3-sticky promos-v3-top-[56px] md:promos-v3-top-[64px] promos-v3-z-10 promos-v3-backdrop-blur-3xl"),children:o.jsx("div",{className:"promos-v3-px-4 promos-v3-py-3 md:promos-v3-py-4 promos-v3-w-full promos-v3-max-w-[1328px] promos-v3-mx-auto",children:o.jsxs("div",{className:"promos-v3-flex promos-v3-gap-4 promos-v3-justify-between promos-v3-items-center",children:[o.jsxs("div",{className:"promos-v3-flex promos-v3-gap-1 promos-v3-items-center promos-v3-flex-wrap promos-v3-min-w-[118px]",children:[o.jsx("p",{className:"promos-v3-text-sm md:promos-v3-text-sm promos-v3-font-bold promos-v3-text-white",children:"Total de opciones:"}),o.jsx("p",{className:"promos-m3-text-base md:promos-v3-text-lg promos-v3-font-bold promos-v3-text-white",children:po(s)})]}),o.jsxs("div",{className:"promos-v3-flex promos-v3-gap-1 promos-v3-rounded-lg promos-v3-border-solid promos-v3-border-1 promos-v3-border-[#FFFFFF66] promos-v3-items-center promos-v3-max-w-[306px] promos-v3-w-full promos-v3-pr-2 promos-v3-bg-[#FFFFFF1A] promos-v3-h-11",children:[o.jsx("input",{type:"text",className:"promos-v3-text-base promos-v3-h-[18px] promos-v3-ml-4 promos-v3-pr-2 promos-v3-w-full promos-v3-outline-none promos-v3-bg-transparent promos-v3-placeholder-[#FFFFFF80] promos-v3-text-white",placeholder:"Buscar opciones",value:String(t),onChange:a=>{const i=a.currentTarget.value.replace(/\D/g,"");p(i)}}),o.jsx("img",{onClick:m,src:`
                ${x.BUCKET_IMG_PROMOCIONES}SORTEO-CRUCERO/${t.length>0?"close-icon.png":"search-icon.png"}`,alt:"",className:c("promos-v3-invert",t.length>0&&"promos-v3-cursor-pointer")})]})]})})})},Lo="_headerContainer_3c38w_2",Ro="_cardHeader_3c38w_42",Po="_contenidoHeader_3c38w_47",Mo="_containerWeek_3c38w_80",w={headerContainer:Lo,cardHeader:Ro,contenidoHeader:Po,containerWeek:Mo},Do=({data:s})=>{const[t,p]=e.useState(""),[m,a]=e.useState(""),[i,v]=e.useState(""),[r,d]=e.useState(""),R=`.backimageheaderContainer::before{
    background: linear-gradient(0deg, rgba(29, 7, 61, 0.50) 0%, rgba(29, 7, 61, 0.50) 100%), url("${x.BUCKET_IMG_PROMOCIONES}GRATIVERSO-V2/CARTILLA/bannerGrativerso.jpg") lightgray 50% / cover no-repeat
  }
  `;return e.useEffect(()=>{s&&(p(s.nombreInvitado),a(String(s.numeroDocumento)),v(s.tipoDocumento),s.keySemana!==r&&d(s.keySemana))},[s,r]),o.jsxs(o.Fragment,{children:[o.jsx("style",{scoped:!0,children:R}),o.jsx("div",{className:c(w.headerContainer,"backimageheaderContainer"),children:o.jsx("div",{className:w.cardHeader,children:o.jsxs("div",{className:c(w.contenidoHeader,"!promos-v3-rounded-[12px]"),children:[o.jsxs("div",{children:[o.jsx("img",{src:`${x.BUCKET_IMG_PROMOCIONES}GRATIVERSO-V2/CARTILLA/logoGrativerso.png`,alt:"logoCelebreishow",className:"!promos-v3-top-[-9px] md:!promos-v3-top-[-5px] promos-v3-pointer-events-none"}),r?o.jsxs("div",{className:c(w.containerWeek,"promos-v3-text-white promos-v3-z-10 promos-v3-bottom-[-4px] promos-v3-left-[50%]","promos-v3-absolute !promos-v3-left-[24px] !promos-v3-bottom-[-14px]"),children:[o.jsx("img",{src:`${x.BUCKET_IMG_PROMOCIONES}CELEBREYSHOW/HEADER/week.png`,alt:"week",className:"!promos-v3-w-[117px] !promos-v3-h-[30px] !promos-v3-relative sm:promos-v3-w-[50px]"}),o.jsx("p",{className:"promos-v3-text-white promos-v3-text-center promos-v3-relative promos-v3-font-bold promos-v3-z-10 promos-v3-left-[-74px] promos-v3-top-[-28px] promos-v3-text-base",children:r})]}):null]}),o.jsx("div",{className:"promos-v3-text-white promos-v3-text-xl promos-v3-font-bold md:promos-v3-text-2xl promos-v3-h-[24px] md:promos-v3-h-[29px] promos-v3-pb-1",children:"Cartilla para sorteos"}),o.jsx("p",{className:"promos-v3-text-white promos-v3-text-sm md:promos-v3-text-lg promos-v3-font-bold promos-v3-h-[18px] md:promos-v3-h-[22px]",children:"GRATIVERSO"}),o.jsxs("p",{className:"promos-v3-text-white promos-v3-mt-3 promos-v3-text-xs md:promos-v3-text-lg promos-v3-h-[17px] md:promos-v3-h-[23px] promos-v3-overflow-ellipsis promos-v3-overflow-hidden promos-v3-whitespace-nowrap promos-v3-max-w-full",children:[o.jsx("strong",{className:"promos-v3-text-sm md:promos-v3-text-lg promos-v3-text-white",children:"Nombre:"})," ",t]}),o.jsxs("p",{className:"promos-v3-text-white promos-v3-mt-1 promos-v3-text-xs md:promos-v3-text-lg promos-v3-h-[17px] md:promos-v3-h-[23px]",children:[o.jsx("strong",{className:"promos-v3-text-sm promos-v3-text-white md:promos-v3-text-lg",children:"Doc. ID:"})," ",i==="CEX"?"CE":i," ",m]})]})})})]})},ko=()=>o.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M41.8 42L28.65 28.85C28.1833 29.2167 27.6583 29.575 27.075 29.925C26.4917 30.275 25.9333 30.5667 25.4 30.8C25.2333 30.3333 25.05 29.8583 24.85 29.375C24.65 28.8917 24.4167 28.45 24.15 28.05C25.95 27.35 27.475 26.1917 28.725 24.575C29.975 22.9583 30.6 21.0333 30.6 18.8C30.6 16.1 29.65 13.7917 27.75 11.875C25.85 9.95833 23.55 9 20.85 9C18.1167 9 15.7917 9.95833 13.875 11.875C11.9583 13.7917 11 16.1 11 18.8C11 19.3667 11.0583 19.9583 11.175 20.575C11.2917 21.1917 11.4333 21.7167 11.6 22.15C11.1667 22.2167 10.6833 22.325 10.15 22.475C9.61667 22.625 9.13333 22.8 8.7 23C8.46667 22.4 8.29167 21.7333 8.175 21C8.05833 20.2667 8 19.5333 8 18.8C8 15.2333 9.25 12.2083 11.75 9.725C14.25 7.24167 17.2833 6 20.85 6C24.3833 6 27.3917 7.25 29.875 9.75C32.3583 12.25 33.6 15.2667 33.6 18.8C33.6 20.2333 33.35 21.65 32.85 23.05C32.35 24.45 31.6667 25.6667 30.8 26.7L44 39.8L41.8 42Z",fill:"white"}),o.jsx("path",{d:"M17.59 29L14 32.59L10.41 29L9 30.41L12.59 34L9 37.59L10.41 39L14 35.41L17.59 39L19 37.59L15.41 34L19 30.41L17.59 29Z",fill:"white"}),o.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 34C24 39.5228 19.5228 44 14 44C8.47715 44 4 39.5228 4 34C4 28.4772 8.47715 24 14 24C19.5228 24 24 28.4772 24 34ZM21.6 34C21.6 38.1974 18.1974 41.6 14 41.6C9.80264 41.6 6.4 38.1974 6.4 34C6.4 29.8026 9.80264 26.4 14 26.4C18.1974 26.4 21.6 29.8026 21.6 34Z",fill:"white"})]}),Bo=({tabselect:s,changeTabSelect:t,disableLast:p,proyecciones:m,tabsState:a})=>{function i(r){return m-p<r+1}function v(r){s!==r&&(t(r),_.Etiquetado({categoria:"visor de opciones de sorteos",accion:"click",etiqueta:"opciones del sorteo "+a[r].name,value:0}))}return o.jsx("div",{className:c(a.length<=5&&"promos-v3-justify-center","md:promos-v3-justify-center promos-v3-flex promos-v3-bg-[#FFFFFF33] promos-v3-z-10 promos-v3-p-2 promos-v3-gap-2 promos-v3-overflow-auto content__scrollbarHorizontalHidden"),children:a.length===1?o.jsx("h3",{className:"promos-v3-h-[26px] md:promos-v3-h-6 promos-v3-text-xl promos-v3-text-white promos-v3-font-bold",children:"General"}):a.map((r,d)=>o.jsx(jo,{color:r.color,index:d,title:r.name,active:s===d,disable:i(d),handleClick:()=>v(d)},d))})},Go="_contentCard_109pr_2",Vo="_verAvanceContainer_109pr_12",Uo="_logoPromoFin_109pr_39",qo="_infoContainer_109pr_44",Ho="_priceText_109pr_51",$o="_infoText_109pr_65",Ko="_avanceText_109pr_82",Wo="_logoAvance_109pr_88",Qo="_promoFinCard_109pr_94",g={contentCard:Go,verAvanceContainer:Vo,logoPromoFin:Uo,infoContainer:qo,priceText:Ho,infoText:$o,avanceText:Ko,logoAvance:Wo,promoFinCard:Qo},zo=({close:s})=>{const m=new URLSearchParams(window.location.search).get("mostrar-btn")==="false",a=`.verAvanceContainer::before{
      background-image: url("${x.BUCKET_IMG_PROMOCIONES}GRATIVERSO-V2/CAF/bgLoginGrativerso.png");
    }
    @media (max-width: 650px) {
      .verAvanceContainer::before {
        background-image: url("${x.BUCKET_IMG_PROMOCIONES}GRATIVERSO-V2/CAF/bgMobileLoginGrativerso.jpg");
      }
    }
    `,i=()=>{_.Etiquetado({categoria:"visor de opciones de sorteos",accion:"click",etiqueta:"login - ver mi avance",value:0});const v=20,r=new Date;r.setMinutes(r.getMinutes()+v),sessionStorage.setItem("storedSessionLifetime",String(r)),window.open("/casino-online/promociones/caf/grativerso?pagina=semanal","_self")};return o.jsx("div",{className:"promos-v3-absolute promos-v3-inset-0",children:o.jsxs("div",{className:"promos-v3-bg-[#222226] promos-v3-h-full promos-v3-overflow-hidden promos-v3-flex promos-v3-flex-col",children:[m?o.jsx(Q,{}):o.jsx(z,{callBack:s}),o.jsx("style",{scoped:!0,children:a}),o.jsx("div",{className:c(g.verAvanceContainer,"verAvanceContainer"),children:o.jsxs("div",{className:c(g.promoFinCard),children:[o.jsxs("picture",{children:[o.jsx("source",{media:"(max-width: 650px)",srcSet:x.BUCKET_IMG_PROMOCIONES+"GRATIVERSO-V2/CAF/logoMobile.png"}),o.jsx("img",{src:x.BUCKET_IMG_PROMOCIONES+"GRATIVERSO-V2/CAF/logo.png",className:c(g.logoAvance),alt:"logo ver avance"})]}),o.jsxs("div",{className:c(g.infoContainer),children:[o.jsx("div",{className:c(g.priceText),children:"S/163,000 en premios"}),o.jsxs("div",{className:c(g.infoText),children:[o.jsx("p",{children:"¡Sé 1 de los 270 ganadores de la semana! Juega, acumula puntos y participa por gratis en efectivo."}),o.jsx("div",{className:"promos-v3-text-center",children:o.jsx("span",{className:c(g.avanceText),onClick:i,children:"Ver mi avance"})})]})]})]})})]})})},Zo=5;function Yo(){var K;const s=new URLSearchParams(window.location.search),t=s.get("pestana"),m=s.get("mostrar-btn")==="false",a="grativerso-mensual",i="grativerso-semanal",{idPromotion:v}=xo[a],{data:r,isLoading:d}=Eo({queryKey:["weekInfo",a],queryFn:()=>Ao.getWeekInfo(v||0),enabled:!!v,refetchOnWindowFocus:!1}),A=e.useCallback(()=>{if(!r)return i;const l=r.data.listasPromocion.find(u=>u.idPromocion===v);return l?[W.ACUMULACION,W.VALIDACION].includes(l.etapaActiva)?i:a:i},[r,v])(),{national_id:E}=vo(),F=_o("storedNationalId"),[C,P]=e.useState(0),[b,M]=e.useState(""),[Z,S]=e.useState(!1),[Y,D]=e.useState(!1),[y,k]=e.useState(0),[T,J]=e.useState([]),[X,oo]=e.useState(0),[eo,so]=e.useState(0),[B,G]=e.useState(E&&E!==0?E:F&&F!=="0"?F:0),[ro,V]=e.useState(1),[U,q]=e.useState(""),[H,to]=e.useState([]),ao=[{name:"Zafiro",color:"linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.2) 100%),linear-gradient(0deg, #5DA0EF, #5DA0EF)",bg:"linear-gradient(180deg, #3A74BA 0%, #300B38 100%)"},{name:"Oro",color:"linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.2) 100%),linear-gradient(0deg, #DEB13A, #DEB13A)",bg:"linear-gradient(180deg, #764F3E 0%, #300B38 100%)"},{name:"Plata",color:"linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.2) 100%),linear-gradient(0deg, #B4BAC2, #B4BAC2)",bg:"linear-gradient(180deg, #6C5570 0%, #300B38 100%)"},{name:"Bronce",color:"linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.2) 100%),linear-gradient(0deg, #FFA54C, #FFA54C)",bg:"linear-gradient(180deg, #824B45 0%, #300B38 100%)"},{name:"General",color:"linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.2) 100%),linear-gradient(0deg, #AC62F9, #AC62F9)",bg:"linear-gradient(180deg, #6600AF 0%, #1E0740 100%)"}],{isLoading:j,isError:I,options:h,fetchNextPage:no,hasNextPage:io,cantidadOpciones:N,data:n}=Co(A,ro,b.length>2?b:"",d?void 0:B,U);e.useEffect(()=>{if(y===0){const l=(n==null?void 0:n.proyecciones.length)||0;k(l);const u=ao.slice(Zo-l);if(to(u),n!=null&&n.proyecciones&&n.proyecciones.length>1){J(n.proyecciones);const mo=n==null?void 0:n.proyecciones.filter(f=>f.opts===0).length;oo(mo);const L=n.proyecciones.map((f,lo)=>f.opts>0?lo:-1).filter(f=>f!==-1).pop();L&&L>0&&!t&&$(L)}}},[n,y]),e.useEffect(()=>{N&&N>0&&so(N)},[N]),e.useEffect(()=>{V(Number(t)),P(Number(t))},[t]),e.useEffect(()=>{n===null&&S(!0)},[n]);function co(l){const u=A===i?9:10;l.length<u&&M(l)}e.useEffect(()=>{T.length>0&&q(T[C].id.toString()||"")},[C,T]);const $=l=>{M(""),P(l),V(l)},O=()=>{S(!1),D(!1),G(0),k(0),q(""),_.Etiquetado({categoria:"visor de opciones de sorteos",accion:"click",etiqueta:"header - salir",value:0})};return Y?o.jsx(wo,{close:O}):Z?o.jsx(zo,{close:O}):B?j&&!I&&b.length===0&&U===""?o.jsx("div",{className:"promos-v3-absolute promos-v3-inset-0 promos-v3-bg-[#EFEDFF]",children:o.jsx(bo,{full:!0})}):o.jsx("div",{className:"promos-v3-absolute promos-v3-w-full promos-v3-min-h-full",style:{backgroundImage:`${(K=H[C])==null?void 0:K.bg}`,backgroundAttachment:"fixed"},children:o.jsx("div",{className:"promos-v3-h-full promos-v3-flex promos-v3-flex-col ",children:o.jsxs("div",{className:"promos-v3-flex promos-v3-flex-col",children:[m?o.jsx(Q,{extraClass:"promos-v3-sticky promos-v3-top-0"}):o.jsx(z,{callBack:O}),o.jsx(Do,{data:n}),o.jsx(Bo,{tabselect:C,changeTabSelect:$,disableLast:X,proyecciones:y,tabsState:H}),o.jsx(Oo,{opciones:eo,numberSearch:b,changeInputSearch:co}),h.length>0&&h[0]!==null&&o.jsx(Io,{options:h,fetchMoreData:no,hasNextPage:io===!0,isLoading:j}),j&&o.jsx("div",{className:"promos-v3-p-5 promos-v3-flex promos-v3-justify-center promos-v3-items-center promos-v3-min-h-[100px]",children:o.jsx("strong",{className:"promos-v3-text-base promos-v3-text-white promos-v3-mt-4",children:"Cargando..."})}),(!j&&!I&&(!h||h.length===0||h[0]===null)||I)&&o.jsxs("div",{className:"promos-v3-p-5 promos-v3-flex promos-v3-flex-col promos-v3-justify-center promos-v3-items-center promos-v3-h-[calc(100vh-400px)] md:promos-v3-h-[calc(100vh-550px)] promos-v3-min-h-[200px]",children:[o.jsx(ko,{}),o.jsx("p",{className:"promos-v3-text-base md:promos-v3-text-lg promos-v3-text-white promos-v3-mt-4",children:"No se encontraron resultados."})]})]})})}):o.jsx(No,{promoCode:A,setNationalId:G,setShowVerAvance:S,setShowPromoFin:D,type:"LOG_OPCIONES"})}const Jo=new So;go.createRoot(document.getElementById("root")).render(o.jsx(ho.StrictMode,{children:o.jsxs(Fo,{client:Jo,children:[o.jsx(uo,{}),o.jsx(Yo,{})]})}));
