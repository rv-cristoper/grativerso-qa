import{r as Ho,t as Go,j as o,u as g,c as Vo,E as co,p as G,a as T,b as u,d as S,e as B,f as Yo,g as $,h as Ro,i as q,k as Ko,l as Eo,G as Zo,m as z,P as Jo,n as Xo,R as oe,T as ee,M as se}from"../shared/global.js";import{m as Mo,a as To,F as te,C as re,b as ne,P as ae,c as lo,M as ie,Y as po,s as me,d as ce,R as le,e as to,f as $o,B as pe,g as J,E as de,h as ve,T as ue,i as xe}from"../shared/BoxItem.js";import{D as V}from"../shared/Divider.js";import{P as vo}from"../shared/PaginationArrowIcon.js";import{s as W,a as X,T as uo,V as fe,u as he,b as oo,M as _e,c as ge}from"../shared/ModalTerms.js";import{I as ro}from"../shared/SorteoCruceroTerms.js";import{L as Y}from"../shared/LoaderDisc.js";import{u as I,Q as je}from"../shared/useBaseQuery.js";import{u as no,i as ao}from"../shared/TableItems.js";import{u as be}from"../shared/useQuery.js";import{u as we}from"../shared/useMutation.js";import{S as Oo}from"../shared/Button.js";import{R as Ne}from"../shared/index.js";import{Q as Ce}from"../shared/queryClient.js";import"../shared/CheckIcon.js";import"../shared/useDataPromo.js";import"../shared/react-tooltip.min.js";import"../shared/ELottery.js";import"../shared/CloseIcon.js";import"../shared/PremioMayorTerms.js";import"../shared/NavidadTerms.js";import"../shared/NavidadTerms2.js";import"../shared/NavidadTerms3.js";import"../shared/Table.js";import"../shared/TerminosGrativerso.js";function xo(e,t){var s;Ho(1,arguments);var r=Go((s=t==null?void 0:t.additionalDigits)!==null&&s!==void 0?s:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var n=Ee(e),c;if(n.date){var a=Me(n.date,r);c=Te(a.restDateString,a.year)}if(!c||isNaN(c.getTime()))return new Date(NaN);var m=c.getTime(),p=0,i;if(n.time&&(p=$e(n.time),isNaN(p)))return new Date(NaN);if(n.timezone){if(i=Oe(n.timezone),isNaN(i))return new Date(NaN)}else{var l=new Date(m+p),v=new Date(0);return v.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),v.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),v}return new Date(m+p+i)}var Q={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ye=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Se=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Re=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Ee(e){var t={},s=e.split(Q.dateTimeDelimiter),r;if(s.length>2)return t;if(/:/.test(s[0])?r=s[0]:(t.date=s[0],r=s[1],Q.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Q.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){var n=Q.timezone.exec(r);n?(t.time=r.replace(n[1],""),t.timezone=n[1]):t.time=r}return t}function Me(e,t){var s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(s);if(!r)return{year:NaN,restDateString:""};var n=r[1]?parseInt(r[1]):null,c=r[2]?parseInt(r[2]):null;return{year:c===null?n:c*100,restDateString:e.slice((r[1]||r[2]).length)}}function Te(e,t){if(t===null)return new Date(NaN);var s=e.match(ye);if(!s)return new Date(NaN);var r=!!s[4],n=L(s[1]),c=L(s[2])-1,a=L(s[3]),m=L(s[4]),p=L(s[5])-1;if(r)return De(t,m,p)?Pe(t,m,p):new Date(NaN);var i=new Date(0);return!Ie(t,c,a)||!ke(t,n)?new Date(NaN):(i.setUTCFullYear(t,c,Math.max(n,a)),i)}function L(e){return e?parseInt(e):1}function $e(e){var t=e.match(Se);if(!t)return NaN;var s=eo(t[1]),r=eo(t[2]),n=eo(t[3]);return ze(s,r,n)?s*Mo+r*To+n*1e3:NaN}function eo(e){return e&&parseFloat(e.replace(",","."))||0}function Oe(e){if(e==="Z")return 0;var t=e.match(Re);if(!t)return 0;var s=t[1]==="+"?-1:1,r=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return Le(r,n)?s*(r*Mo+n*To):NaN}function Pe(e,t,s){var r=new Date(0);r.setUTCFullYear(e,0,4);var n=r.getUTCDay()||7,c=(t-1)*7+s+1-n;return r.setUTCDate(r.getUTCDate()+c),r}var Ae=[31,null,31,30,31,30,31,31,30,31,30,31];function Po(e){return e%400===0||e%4===0&&e%100!==0}function Ie(e,t,s){return t>=0&&t<=11&&s>=1&&s<=(Ae[t]||(Po(e)?29:28))}function ke(e,t){return t>=1&&t<=(Po(e)?366:365)}function De(e,t,s){return t>=1&&t<=53&&s>=0&&s<=6}function ze(e,t,s){return e===24?t===0&&s===0:s>=0&&s<60&&t>=0&&t<60&&e>=0&&e<25}function Le(e,t){return t>=0&&t<=59}const Fe="_pagination_1pyr9_2",We="_pagination__left_1pyr9_7",Be="_pagination__btn_1pyr9_10",qe="_pagination__txt_1pyr9_24",Ue="_display_1pyr9_30",M={pagination:Fe,pagination__left:We,pagination__btn:Be,"pagination__btn-disabled":"_pagination__btn-disabled_1pyr9_20",pagination__txt:qe,display:Ue},Qe=({width:e=15,height:t=15,classNames:s="",color:r="#000"})=>o.jsx("svg",{width:e,height:t,className:s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M16.59 9H15V4C15 3.45 14.55 3 14 3H10C9.45 3 9 3.45 9 4V9H7.41C6.52 9 6.07 10.08 6.7 10.71L11.29 15.3C11.68 15.69 12.31 15.69 12.7 15.3L17.29 10.71C17.92 10.08 17.48 9 16.59 9ZM5 19C5 19.55 5.45 20 6 20H18C18.55 20 19 19.55 19 19C19 18.45 18.55 18 18 18H6C5.45 18 5 18.45 5 19Z",fill:r})}),He="_prizeWinner_dr0y4_2",Ge="_prizeWinner__border_dr0y4_6",Ve="_prizeWinner__content_dr0y4_32",Ye="_prizeWinner__prizeInfo_dr0y4_40",Ke="_prizeWinner__optionList_dr0y4_44",Ze="_scroll_dr0y4_65",A={prizeWinner:He,prizeWinner__border:Ge,prizeWinner__content:Ve,prizeWinner__prizeInfo:Ye,prizeWinner__optionList:Ke,scroll:Ze},Je="_option_6il9l_2",Xe="_option__selected_6il9l_16",os="_option__content_6il9l_25",es="_option__textBg_6il9l_33",ss="_option__text_6il9l_33",F={option:Je,option__selected:Xe,option__content:os,option__textBg:es,option__text:ss},ts="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/optionTicket.webp",rs=({optionCode:e,type:t="default",selected:s})=>{const{promoCode:r}=g(),n={default:ts,plata:`${co.BUCKET_IMG_PROMOCIONES}GRATIVERSO/RESULTADOS/ETAPA-SORTEO/ticket-default.png`,grativerso:`${co.BUCKET_IMG_PROMOCIONES}GRATIVERSO/RESULTADOS/ticket-default.png`};return o.jsx(o.Fragment,{children:o.jsx("div",{className:Vo(F.option,s?F.option__selected:""),children:o.jsx("div",{className:F.option__content,style:{backgroundImage:`url(${n[t]})`},children:o.jsx("div",{className:F.option__textBg+` bg-gradient-result-ticket-${r}`,children:o.jsx("p",{className:F.option__text,children:e})})})})})},ns=({cantidad:e,orden:t,bg:s,monto:r,mobile:n=!1})=>o.jsx(o.Fragment,{children:n?o.jsx("div",{className:"promos-v3-flex sm:promos-v3-hidden promos-v3-justify-center promos-v3-w-full",children:o.jsxs("div",{className:`${W["award-item"]} ${W["award-item-principal"]} promos-v3-flex promos-v3-flex-col promos-v3-justify-center promos-v3-items-center`,style:{backgroundImage:`url(${s})`},children:[o.jsx("p",{className:"promos-v3-text-white promos-v3-font-extrabold promos-v3-text-[50px] promos-v3-leading-10 promos-v3-mt-1",children:e}),o.jsx("p",{className:"promos-v3-text-white promos-v3-font-bold promos-v3-text-sm promos-v3-mb-2.5",children:"Ganador de"}),o.jsxs("p",{className:"promos-v3-text-black promos-v3-font-extrabold promos-v3-text-[28px]",children:["S/ ",G(r)]})]})}):o.jsxs("div",{className:`${W["award-item"]} ${t==1&&W["award-item-principal"]} ${t==1?"promos-v3-hidden sm:promos-v3-flex":"promos-v3-flex"} promos-v3-flex-col promos-v3-justify-center promos-v3-items-center`,style:{backgroundImage:`url(${s})`},children:[o.jsx("p",{className:"promos-v3-text-white promos-v3-font-extrabold promos-v3-text-[38px] promos-v3-leading-[0.7] promos-v3-mt-3 ",children:e}),o.jsx("p",{className:"promos-v3-text-white promos-v3-font-bold promos-v3-text-sm promos-v3-mb-2",children:e>1?"Ganadores de":"Ganador de"}),o.jsxs("p",{className:"promos-v3-text-black promos-v3-font-extrabold promos-v3-text-[25px]",children:["S/ ",G(r)]})]})}),as=({day:e,extraClassName:t=""})=>o.jsxs("div",{className:"promos-v3-flex promos-v3-flex-col promos-v3-justify-center promos-v3-items-center promos-v3-rounded-2xl promos-v3-bg-white !promos-v3-bg-opacity-10 promos-v3-p-2 "+t,children:[o.jsxs("h4",{className:"promos-v3-text-white promos-v3-font-bold promos-v3-mb-1 promos-v3-text-base sm:promos-v3-text-lg",children:["Canjea tus opciones:"," "]}),o.jsx("p",{className:"promos-v3-text-white promos-v3-text-base sm:promos-v3-text-lg first-letter:promos-v3-capitalize",children:e})]}),fo="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/award-blue.svg",is="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/award-purple.svg",Ao="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/award-black.svg",ms=({premio:e,promoCode:t="suenos"})=>{var c;const s={suenos:fo,"sorteo-estelar":is,"vip-royal":Ao,"suenos-navidad":fo},r=((c=e==null?void 0:e.opciones)==null?void 0:c.length)>4,n=e.opciones.filter(a=>(a==null?void 0:a.opcion)&&a.opcion.length>0);return o.jsx(o.Fragment,{children:o.jsxs("div",{className:`${A.prizeWinner} promos-v3-flex-1`,children:[o.jsx("div",{className:`${A.prizeWinner__border} bg-gradient-result-prize-${t}`}),o.jsxs("div",{className:T(`${A.prizeWinner__content} promos-v3-min-h-full`,r&&"promos-v3-pb-1"),children:[o.jsx("div",{className:T(A.prizeWinner__prizeInfo,r&&"promos-v3-pb-2"),children:(e==null?void 0:e.opciones)&&o.jsx(ns,{cantidad:n.length,monto:e.premio,orden:0,bg:s[t]})}),o.jsx("div",{className:`${A.prizeWinner__optionList} ${r&&A.scroll}`,children:(e==null?void 0:e.opciones)&&n.map((a,m)=>o.jsx(rs,{promoCode:t,optionCode:a.opcion},a.opcion+"-"+m))})]})]})})},cs=({currentLotteryDate:e="",currentPage:t,totalPages:s,changePage:r})=>{const n=t===0,c=t===s-1,a=()=>{if(!e)return"";const{diaSemana:m,diaPadded:p,mesPadded:i}=S(e);return`${B(m)} ${p}/${i}`};return o.jsx(o.Fragment,{children:o.jsxs("div",{className:M.pagination,children:[o.jsx("div",{className:T(M.pagination__btn,n&&M["pagination__btn-disabled"]),onClick:()=>{n||r(-1)},children:o.jsx(vo,{classNames:M.pagination__left,disabled:n})}),e&&o.jsx("p",{className:"promos-v3-flex promos-v3-items-center promos-v3-text-white promos-v3-font-extrabold  promos-v3-text-center promos-v3-text-base sm:promos-v3-text-lg",children:a()}),o.jsx("div",{className:c?M.pagination__btn+` ${M["pagination__btn-disabled"]}`:M.pagination__btn,onClick:()=>{c||r(1)},children:o.jsx(vo,{classNames:M.pagination__right,disabled:c})})]})})},ls=({lotteries:e,promoCode:t})=>{var c,a,m,p;const[s,r]=u.useState(0);function n(i){const l=s+i;r(l)}return o.jsx(o.Fragment,{children:o.jsxs("div",{className:M.display,children:[o.jsxs("div",{className:"md:promos-v3-flex promos-v3-justify-between",children:[o.jsx("h3",{className:"promos-v3-font-bold promos-v3-mb-2 promos-v3-text-white promos-v3-text-xl md:promos-v3-mb-0 md:promos-v3-text-2xl promos-v3-text-center",children:"Resultados"}),o.jsx(cs,{changePage:n,currentLotteryDate:(c=e[s])!=null&&c.fechaSorteo?(a=e[s])==null?void 0:a.fechaSorteo:null,currentPage:s,totalPages:e.length})]}),o.jsx("div",{className:"promos-v3-grid promos-v3-auto-rows-fr promos-v3-gap-4 promos-v3-grid-cols-1 sm:promos-v3-grid-cols-2 lg:promos-v3-grid-cols-3",children:(p=(m=e[s])==null?void 0:m.premios)==null?void 0:p.map((i,l)=>o.jsx(ms,{premio:i,promoCode:t},`${e[s].fechaSorteo}-${l}`))})]})})},ho="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/1.webp",ps="_noResults_xk0pm_2",ds="_noResults__next_xk0pm_8",vs="_noResults__desc_xk0pm_8",us="_noResults__img_xk0pm_8",xs="_noResults__br_xk0pm_8",R={noResults:ps,noResults__next:ds,noResults__desc:vs,noResults__img:us,noResults__br:xs},Io="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/noRes.svg",fs="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/SpotsBg.png",hs=()=>o.jsx(o.Fragment,{children:o.jsxs("div",{className:R.noResults,children:[o.jsx("img",{className:R.noResults__img,src:Io,alt:""}),o.jsxs("h2",{className:`${R.noResults__next} promos-v3-px-20 sm:promos-v3-px-0`,children:["Próximo sorteo",o.jsx("br",{className:R.noResults__br})," "]}),o.jsx("p",{className:`${R.noResults__desc} promos-v3-px-4 sm:promos-v3-px-0`,children:"Prepárate para acumular puntos y canjearlos por opciones. ¡Mucha suerte!"})]})}),_s=({nextLotteryDate:e})=>{if(!e)return o.jsx(hs,{});const{promoCode:t}=g(),{diaSemana:s,dia:r,horaMinutos:n,mesPadded:c,amPm:a}=u.useMemo(()=>S(e),[e]);let m=`${B(s)} ${r}/${c} a las 10:00 PM`;return t==="sorteo-estelar"&&(m="Viernes 13/10 a las 00:30 AM"),o.jsx(o.Fragment,{children:o.jsxs("div",{className:R.noResults,children:[o.jsx("div",{className:"promos-v3-hidden md:promos-v3-block promos-v3-absolute promos-v3-top-0 promos-v3-left-0 promos-v3-bottom-0 promos-v3-right-0 promos-v3-bg-cover ",style:t!=="suenos-navidad"?{backgroundImage:`url(${fs})`}:{}}),o.jsx("img",{className:R.noResults__img,src:Io,alt:""}),e&&o.jsxs("h2",{className:`${R.noResults__next} promos-v3-px-16 sm:promos-v3-px-0`,children:[t==="suenos-navidad"?"Sorteo navideño:":"Próximo sorteo:"," ",o.jsx("br",{className:R.noResults__br}),t==="suenos-navidad"?"viernes 29 a la 1:30 AM":m]}),o.jsx("p",{className:`${R.noResults__desc} promos-v3-px-4 sm:promos-v3-px-0`,children:"Prepárate para acumular puntos y canjearlos por opciones. ¡Mucha suerte!"})]})})},_o=({children:e,bg:t})=>o.jsx("section",{className:`promos-v3-flex-col promos-v3-flex-1 promos-v3-flex promos-v3-justify-center promos-v3-items-center promos-v3-bg-no-repeat promos-v3-bg-cover promos-v3-bg-bottom promos-v3-pb-4 ${X.wideCont} ${X[t]} ${t.includes("W")&&X.confettiImg} bg-gradient-result-${t}`,children:o.jsx("div",{className:"promos-v3-w-full promos-v3-max-w-[888px] md:promos-v3-max-w-[1116px]",children:e})}),gs=({title:e,children:t,bg:s})=>o.jsxs("div",{className:`promos-v3-w-full promos-v3-rounded-2xl promos-v3-pt-6 promos-v3-pb-8 promos-v3-mb-7 md:promos-v3-pb-6 bg-gradient-box-${s}-running promos-v3-relative promos-v3-mb-4`,children:[o.jsx(te,{width:12,height:34,text:"¡Sorteo en curso!",bg:"bg-gradient-common__boxLottery-running",extraClass:"promos-v3-mt-[-46px]",bandWith:"full"}),o.jsxs("div",{className:"promos-v3-px-4 sm:promos-v3-px-16 promos-v3-mt-[42px] md:promos-v3-mt-12 promos-v3-flex promos-v3-flex-col promos-v3-justify-center promos-v3-items-center",children:[o.jsx(re,{width:100}),o.jsx("p",{className:"promos-v3-text-white promos-v3-text-base sm:promos-v3-text-[18px] promos-v3-font-bold promos-v3-mb-1",children:e}),o.jsx("p",{className:"promos-v3-text-white promos-v3-text-base sm:promos-v3-text-lg promos-v3-text-center",children:t})]})]}),js="_confettiContainer_cn7ii_38",bs="_confetti_cn7ii_38",so={confettiContainer:js,confetti:bs,"confetti--animation-slow":"_confetti--animation-slow_cn7ii_55","confetti-slow":"_confetti-slow_cn7ii_1","confetti--animation-medium":"_confetti--animation-medium_cn7ii_58","confetti-medium":"_confetti-medium_cn7ii_1","confetti--animation-fast":"_confetti--animation-fast_cn7ii_61","confetti-fast":"_confetti-fast_cn7ii_1"},go=["#fce18a","#ff726d","#b48def","#f4306d"],jo=["slow","medium","fast"],bo=2200,ws=({duration:e=3e3,particleId:t=ko})=>{const s=u.useRef(null),r=u.useRef(null),{registerOneTimeEffect:n}=g(),c=function(){r.current=setInterval(()=>{var v,d;if(!((v=s.current)!=null&&v.parentElement))throw new Error("No element ref");const a=document.createElement("div"),m=Math.floor(Math.random()*3)+7+"px",p=go[Math.floor(Math.random()*go.length)],i=Math.floor(Math.random()*((d=s.current)==null?void 0:d.parentElement.offsetWidth))+"px",l=jo[Math.floor(Math.random()*jo.length)];a.classList.add(so.confetti,so["confetti--animation-"+l]),a.style.left=i,a.style.width=m,a.style.height=m,a.style.backgroundColor=p,setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a)},e),s.current&&s.current.appendChild(a)},20)};return u.useEffect(()=>(c(),setTimeout(()=>{r.current&&(clearInterval(r.current),setTimeout(()=>{n(t)},bo))},e-bo),()=>{r.current&&clearInterval(r.current)}),[]),o.jsx("div",{className:so.confettiContainer,ref:s})},Ns="_result_eszkb_2",Cs="_result__head_won_eszkb_9",ys="_result__head_lost_eszkb_9",Ss="_result__paragraph_eszkb_14",Rs="_result__title_eszkb_19",Es="_result__txt_eszkb_26",Ms="_result__img_lost_eszkb_31",O={result:Ns,result__head_won:Cs,result__head_lost:ys,result__paragraph:Ss,result__title:Rs,result__txt:Es,result__img_lost:Ms},ko="conf-res",wo={"sorteo-estelar":ho,"vip-royal":po,suenos:ho,"suenos-navidad":po},Ts=({isLoading:e})=>{if(e)return o.jsx(Y,{});const t=u.useRef(null),{oneTimeEffects:s,promoCode:r,typePromotion:n}=g(),a=I().getQueryData([n,r,"resultados"]),m=a.etapaResultado=="RESULTADO"&&(a.ultimoOpcionGanadora||a.ultimoMontoGanado),p=a.etapaResultado=="NINGUNO",i=a.etapaResultado=="VALIDACION"||a.etapaResultado==="RESULTADO"&&a.sorteos===null,l=v=>{if(!v)return"";const{diaSemana:d,dia:x,mesPadded:j}=S(v);return`${d} ${x}/${j}`};return i?o.jsx(ne,{extraClass:"promos-v3-flex-1 promos-v3-flex-col",innerExtraClass:"promos-v3-flex-1",children:o.jsx("div",{className:"promos-v3-mt-[34px] md:promos-v3-mt-[26px] md:promos-v3-mb-2 promos-v3-flex promos-v3-justify-center",children:o.jsx(gs,{headband:{show:!0,title:"¡Sorteo en curso!"},bg:r,title:"¡El bolillero está girando!",children:o.jsx("p",{className:"promos-v3-text-white md:promos-v3-text-[18px]",children:"Pronto anunciaremos a los ganadores"})})})}):p?o.jsx(_o,{bg:r==="suenos-navidad"?"noRes-navidad":"noRes",children:o.jsx(_s,{nextLotteryDate:a.fechaSorteo})}):o.jsx(o.Fragment,{children:o.jsx(_o,{bg:m?`${r}W`:`${r}L`,children:o.jsxs("div",{className:`promos-v3-flex promos-v3-flex-col promos-v3-gap-2 promos-v3-px-4 promos-v3-pt-8 sm:promos-v3-pt-12 ${m?O.result_won:O.result_lost}`,ref:t,children:[o.jsx("div",{className:m?O.result__head_won:O.result__head_lost,children:m?o.jsxs(o.Fragment,{children:[!s[ko]&&o.jsx(ws,{duration:3600}),o.jsxs("div",{children:[o.jsx("h3",{className:"promos-v3-text-white promos-v3-text-2xl sm:promos-v3-text-[28px] promos-v3-font-extrabold promos-v3-text-center promos-v3-mb-2",children:"¡Felicidades!"}),o.jsxs("p",{className:"!promos-v3-leading-normal promos-v3-text-base sm:promos-v3-text-lg promos-v3-text-center promos-v3-text-white promos-v3-px-8 sm:promos-v3-px-0",children:["Ganaste en el sorteo del",l(a.fechaSorteo)]})]}),o.jsx(ro,{illuminationSrc:wo[r],width:364,height:364,zIndex:-2,children:o.jsx(ae,{amount:a.ultimoMontoGanado})}),o.jsx("div",{className:O.result__paragraph,children:o.jsxs("p",{className:"!promos-v3-leading-normal promos-v3-text-base sm:promos-v3-text-lg promos-v3-text-center promos-v3-text-white",children:["Tu opción ganadora fue:"," ",o.jsxs("strong",{className:O.result__txt,children:[a==null?void 0:a.ultimaOpcionGanadora,"."]})," ",o.jsx("br",{}),"Tu premio en efectivo será depositado a tu cuenta del casino online."]})})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("h3",{className:"promos-v3-text-white promos-v3-text-2xl sm:promos-v3-text-[28px] promos-v3-font-extrabold promos-v3-text-center promos-v3-mb-2",children:"¡Estuviste muy cerca!"}),o.jsx("p",{className:"!promos-v3-leading-normal promos-v3-text-base sm:promos-v3-text-lg promos-v3-text-center promos-v3-text-white promos-v3-px-8 sm:promos-v3-px-0",children:"Sorteo del "+l(a==null?void 0:a.fechaSorteo)})]}),o.jsx("div",{className:"promos-v3-my-4",children:o.jsxs(ro,{illuminationSrc:wo[r],width:350,height:350,zIndex:-2,extraClass:"promos-v3-m-auto promos-v3-w-fit",opacity:.6,children:[o.jsx("img",{src:lo,alt:"spark1",className:"promos-v3-absolute promos-v3-right-0"}),o.jsx("img",{className:O.result__img_lost,src:ie,alt:"maquina"}),o.jsx("img",{src:lo,alt:"spark2",className:"promos-v3-absolute promos-v3-left-[-20px] promos-v3-bottom-[-20px]"})]})}),o.jsx("p",{className:"!promos-v3-leading-normal promos-v3-text-base sm:promos-v3-text-lg promos-v3-text-center promos-v3-text-white promos-v3-px-4 sm:promos-v3-px-0",children:"¡Sigue jugando, acumula puntos y participa que todas las semanas tenemos sorteos!"})]})}),o.jsx(V,{}),o.jsx(ls,{lotteries:a==null?void 0:a.sorteos,promoCode:r})]})})})},{Axios:Qt,AxiosError:$s,CanceledError:Ht,isCancel:Gt,CancelToken:Vt,VERSION:Yt,all:Kt,Cancel:Zt,isAxiosError:Jt,spread:Xt,toFormData:or,AxiosHeaders:er,HttpStatusCode:sr,formToJSON:tr,getAdapter:rr,mergeConfig:nr}=Yo,Os=async(e,t)=>{try{const{idPromotion:s}=$[e],{national_id:r}=Ro(),{data:n}=await q.get(`${t}/sorteos/${s}/premios?numero_documento=${r}`);return s===3&&(n.data.puestos=[{orden:1,cantidad:1,monto:1e4},{orden:2,cantidad:2,monto:3e3},{orden:3,cantidad:2,monto:1500},{orden:4,cantidad:3,monto:1e3},{orden:5,cantidad:4,monto:750}]),s===2&&(n.data.puestos=[{orden:1,cantidad:1,monto:3e3},{orden:2,cantidad:2,monto:2e3},{orden:3,cantidad:3,monto:1e3}]),s===1&&(n.data.puestos=[{orden:2,cantidad:1,monto:2500},{orden:3,cantidad:2,monto:1e3},{orden:4,cantidad:6,monto:500}],n.data.puestos2=[{orden:2,cantidad:1,monto:5e3},{orden:3,cantidad:2,monto:2e3},{orden:4,cantidad:3,monto:1e3},{orden:5,cantidad:6,monto:500}]),{tab:"informacion",...n.data}}catch(s){throw console.error("Error en getInformacionSorteo:",s),s}};async function Do(e,t){try{const{idPromotion:s}=$[e],{national_id:r}=Ro(),{data:n}=await q.get(`${t}/sorteos/${s}/avances?numero_documento=${r}`);return{tab:"canjes",...n.data}}catch(s){throw console.error("Error en getCanjeSorteo:",s),s}}const Ps=(e,t)=>{const[s]=no(ao),r=["sorteo",e,t],n=()=>Os(e,s),c=()=>Ko(e,s),a=()=>Do(e,s);return{sorteoBodyQuery:be(r,()=>{switch(t){case"informacion":return n();case"resultados":return c();case"canjes":return a();default:throw new Error("Unimplemented tab")}},{refetchOnWindowFocus:!1})}},No=["#fce18a","#ff726d","#b48def","#f4306d"],Co=["slow","medium","fast"],As=()=>{const e=u.useRef(null),t=u.useRef(null),s=u.useRef(null),r=function(){if(!e.current)return;const m=document.createElement("div");e.current.style.position!=="relative"&&(e.current.style.position="relative"),m.classList.add("confetti-container"),e.current.appendChild(m),t.current=m},n=function(){s.current=setInterval(()=>{if(!e.current)throw new Error("No element ref");const m=document.createElement("div"),p=Math.floor(Math.random()*3)+7+"px",i=No[Math.floor(Math.random()*No.length)],l=Math.floor(Math.random()*e.current.offsetWidth)+"px",v=Co[Math.floor(Math.random()*Co.length)];m.classList.add("confetti","confetti--animation-"+v,"absolute"),m.style.left=l,m.style.width=p,m.style.height=p,m.style.backgroundColor=i,setTimeout(function(){m&&m.parentNode&&m.parentNode.removeChild(m)},5e3),t.current&&t.current.appendChild(m)},25)};return{throwConfetti:m=>{e.current=m,r(),n()},stopConfetti:()=>{s.current&&clearInterval(s.current),setTimeout(()=>{var m;(m=t.current)==null||m.remove();for(const p of document.querySelectorAll(".confetti-container"))p.remove()},4e3)}}},Is=()=>{const[e,t]=u.useState(!1);return{isCustomModal:e,openCustomModal:()=>{t(!0)},closeCustomModal:()=>{t(!1)}}},ks="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/suenos.webp",Ds="_contenedor_canje_97yqf_2",zs="_header_97yqf_2",Ls="_contenido_97yqf_6",Fs="_contenidoNavidad_97yqf_7",Ws="_active_97yqf_11",Bs="_contenido_bottom_97yqf_17",qs="_info_97yqf_30",Us="_contenPuntosOpciones_97yqf_34",Qs="_contenedor_img_97yqf_38",Hs="_btnDescargar_97yqf_67",Gs="_headbandbox_97yqf_79",y={contenedor_canje:Ds,header:zs,contenido:Ls,contenidoNavidad:Fs,active:Ws,contenido_bottom:Bs,info:qs,contenPuntosOpciones:Us,contenedor_img:Qs,btnDescargar:Hs,headbandbox:Gs},Vs="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/canje_icon.svg",Ys=async(e,t)=>{var s;try{const{idPromotion:r}=$[e],{data:n}=await q.post(`${t}/sorteos/${r}/canje`);return n}catch(r){if(!(r instanceof $s))throw console.error("Client error redeeming",r),new Error;return console.error("Error redeemPoints",r),(s=r.response)==null?void 0:s.data}},Ks=async()=>(me(2),!0),Zs=async e=>(await Promise.all([Ks(),e()]))[1],Js=()=>{const e=I(),[t]=no(ao),{promoCode:s,triggerEffect:r}=g(),n=["sorteo",s,"canjes"],{data:c,isLoading:a,mutate:m}=we({mutationKey:["sorteo",s,"canjes","redeem"],mutationFn:()=>Zs(async()=>{const p=await Ys(s,t);if(!p||p.status!==201&&p.status!==200)return p;const i=await Do(s,t);return e.setQueryData(n,i),p}),onSuccess:()=>{r(ot)},onError:p=>{console.error(p.message)},onSettled:async()=>{e.refetchQueries(n)}});return{data:c,isLoading:a,mutate:m}},Xs="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/iluminacion_podio_top-navidad.png",yo=()=>{const{promoCode:e}=g();return o.jsx(ro,{zIndex:0,height:177,width:177,illuminationSrc:e==="suenos-navidad"?Xs:le,children:o.jsx("img",{className:"promos-v3-w-[72px] sm:promos-v3-w-[100px] promos-v3-z-10 promos-v3-relative",src:Vs,alt:""})})},ot="canje_confetti_key",et=()=>{const{promoCode:e,typePromotion:t}=g(),{setActiveTab:s}=Eo(),r=I(),n=Js(),{fechaSorteo:c,puntos:a,opciones:m,fechaActivacion:p,puntosRestantes:i,opcionesCanjeadas:l,btnCanjearOpciones:v,maxCanjeAlcanzado:d,horaServidor:x,rangoCanje:j,esNuevo:f}=r.getQueryData([t,e,"canjes"]),h=l,b=d,_=x,N=m,{milliseconds:C,hours:w}=u.useMemo(()=>{if(!_)return{milliseconds:0,hours:0};const E=ce(xo(c),xo(_)),D=Math.round(E/1e3/60/60);return{milliseconds:E,hours:D}},[_,c]),Wo=u.useMemo(()=>{if(!_||!c)return"--";const{diaSemana:E,diaPadded:D,mesPadded:Z}=S(c);return`${E} ${D}/${Z}`},[_]),io=u.useMemo(()=>{if(C==null)return null;if(C<=0)return"¡Sorteo en curso!";if(C<=36e5&&C>0)return"¡En breve es el sorteo!";if(C)return"¡En "+w+"h es el sorteo!"},[C,w]),Bo=()=>{if(!p)return"";const{diaSemana:E,diaPadded:D,mesPadded:Z}=S(p);return`El canje se activa este  ${E} ${D}/${Z}`},k=C<=0,qo=()=>{Zo.CanjeSatisfactorio(e),n.mutate()},Uo=u.useCallback(()=>{s(2)},[]),{cardCanjeText:mo,cardCanjeTextValue:Qo}=u.useMemo(()=>{if(d)return{cardCanjeText:"Alcanzaste al máximo de opciones para el sorteo",cardCanjeTextValue:null};const E=l>0||m>=(j?j[0].min:0);if(i===null)return{cardCanjeText:null,cardCanjeTextValue:null};switch(e){case"suenos":break;case"suenos-navidad":break;case"sorteo-estelar":if(E)return{cardCanjeText:"Cada punto equivale a una opción más para el sorteo.",cardCanjeTextValue:null};break}return E?{cardCanjeText:`Te faltan ${i} puntos para lograr una opción más.`,cardCanjeTextValue:i}:{cardCanjeText:`Te faltan ${i} puntos para canjear tus opciones e
              ingresar al sorteo.`,cardCanjeTextValue:i}},[C,i,m,e,d,a]),U=v&&a>0,K=w!=null&&w<=24||d;return o.jsxs("div",{className:"sm:promos-v3-w-1/2 promos-v3-w-full "+y.contenedor_canje,children:[o.jsx("div",{className:"promos-v3-bg-black promos-v3-py-2 promos-v3-px-4 promos-v3-text-white promos-v3-text-base sm:promos-v3-text-lg promos-v3-font-bold first-letter:promos-v3-capitalize "+y.header,children:Wo}),o.jsxs("div",{className:T("promos-v3-rounded-e-md promos-v3-relative promos-v3-bg-white",y.contenido,e==="suenos-navidad"&&y.contenidoNavidad,K&&y.active),children:[(w!==null||w!==void 0)&&w<=24&&io&&o.jsx("div",{className:y.headbandbox,children:o.jsx("p",{className:"promos-v3-text-[#4B2909] promos-v3-font-extrabold promos-v3-pt-[10px] promos-v3-text-sm promos-v3-text-center",children:io})}),k||b?o.jsxs("div",{className:"promos-v3-flex promos-v3-flex-col promos-v3-justify-center promos-v3-items-center promos-v3-py-[48px] promos-v3-px-[16px] sm:promos-v3-py-[50px] ",children:[o.jsx(yo,{}),o.jsx("h4",{className:"promos-v3-text-white promos-v3-text-[20px] sm:promos-v3-text-[24px] promos-v3-font-bold promos-v3-my-[8px] sm:promos-v3-mt-0 promos-v3-relative promos-v3-z-10",children:k?"¡El bolillero está girando!":"¡Legaste al canje máximo!"}),o.jsxs("p",{className:"promos-v3-text-white promos-v3-text-center sm:promos-v3-text-[18px]",children:[k?h>0?"Mucha suerte, pronto podrás ver a los ganadores en la pestaña ":"Pronto podrás ver a los ganadores en la pestaña ":o.jsxs(o.Fragment,{children:["Prepárate para el sorteo. ",o.jsx("br",{}),"¡Mucha suerte!"]}),k&&o.jsx("span",{className:"promos-v3-font-bold promos-v3-underline promos-v3-text-white sm:promos-v3-text-[18px] promos-v3-cursor-pointer promos-v3-select-none",onClick:Uo,children:"Resultados."})]})]}):o.jsxs("div",{className:"promos-v3-p-4 sm:promos-v3-p-6 promos-v3-flex promos-v3-flex-wrap",children:[o.jsxs("div",{className:"promos-v3-flex promos-v3-w-full promos-v3-rounded-lg promos-v3-bg-white "+y.contenPuntosOpciones,children:[o.jsx("div",{className:"promos-v3-rounded-s-lg promos-v3-w-[88px] sm:promos-v3-w-[136px] promos-v3-grid promos-v3-place-items-center  "+y.contenedor_img,children:o.jsx(yo,{})}),o.jsxs("div",{className:"promos-v3-text-center promos-v3-py-2 promos-v3-px-4 sm:promos-v3-p-4  promos-v3-rounded-e-2xl promos-v3-flex-auto ",children:[o.jsx("p",{className:"promos-v3-text-[12px] ",children:"Tus puntos"}),o.jsx("h4",{id:"idpuntaje",className:"sm:promos-v3-text-[24px] promos-v3-font-bold promos-v3-text-black promos-v3-text-[20px] ",children:a??0}),o.jsxs("p",{id:"puntajeEquivalencia","data-testid":"puntajeEquivalencia","data-test-value":m,className:"promos-v3-text-[14px] promos-v3-mt-[13px]",children:["Equivalen a ",m??0," opciones"]})]})]}),mo&&o.jsx("p",{className:"promos-v3-w-full promos-v3-mt-4 promos-v3-text-xs promos-v3-text-center "+y.info,id:"canjeTextoComplementario","data-testid":"canjeTextoComplementario","data-test-value":Qo,children:mo})]}),!(k||b)&&o.jsxs("div",{className:"promos-v3-p-4 sm:promos-v3-p-6 promos-v3-text-center "+y.contenido_bottom,children:[h>0&&N===0&&o.jsx("p",{className:"promos-v3-mb-[16px]",children:"¡Sigue acumulando puntos para canjear más opciones!"}),N>0&&v&&o.jsx("p",{className:"promos-v3-mb-[16px] promos-v3-text-base",children:"¡Canjea ahora y participa del sorteo!"}),o.jsx("button",{className:T("promos-v3-py-2 promos-v3-px-4 promos-v3-font-bold promos-v3-text-sm",K&&!U&&"btn-promos-disabled",!K&&!U&&"promos-v3-bg-gray-900 promos-v3-bg-opacity-10"),disabled:!U||f,onClick:qo,children:o.jsxs("div",{className:T("promos-v3-flex promos-v3-gap-[10px] promos-v3-justify-center promos-v3-leading-8",U&&!f&&"promos-v3-text-black"),children:[n.isLoading&&o.jsx(o.Fragment,{children:o.jsx(Oo,{classNames:"promos-v3-h-8 promos-v3-w-8 promos-v3-animate-spin"})}),"CANJEAR OPCIONES"]})}),p&&w!==null&&w!==void 0&&w>24&&o.jsx("p",{className:"promos-v3-mt-4 promos-v3-text-xs ",children:Bo()})]})]})]})};async function st(e,t){try{const{data:s}=await q.get(`/${e}/sorteos/${t}/cartillapdf`);return s.data}catch(s){console.error("Error downloading Options",s)}}async function tt(e,t){try{const{data:s}=await q.get(`/${e}/sorteos/${t}/opcionescartilla`);return s.data}catch(s){console.error("Error downloading Options",s)}}const rt=({onClose:e,cliente:t,alias:s,fechaEmision:r,fechaSorteo:n,opciones:c})=>{const a=u.useRef(null),[m,p]=u.useState(0),{promoCode:i}=g(),{logo:l,title:v,bgAward:d}=$[i],x=()=>{const{diaSemana:f,diaNumber:h,mesPadded:b}=S(n);return`${B(f)} ${h}/${b}`},j=()=>{const{diaNumber:f,mesPadded:h,anio:b,horaMinutos:_,amPm:N}=S(r);return`${f}/${h}/${b} ${_} ${N}`};return u.useEffect(()=>{function f(){if(a.current){const h=a.current.clientHeight;p(h/2-150)}}return window.addEventListener("resize",f),f(),()=>{window.removeEventListener("resize",f)}},[]),o.jsxs("div",{className:"promos-v3-fixed promos-v3-inset-0 promos-v3-z-50 promos-v3-flex promos-v3-items-center promos-v3-justify-center",children:[o.jsx("div",{className:"promos-v3-fixed promos-v3-inset-0 promos-v3-bg-black promos-v3-opacity-50"}),o.jsxs("div",{ref:a,className:"promos-v3-bg-white promos-v3-rounded-lg promos-v3-shadow-lg promos-v3-z-10 promos-v3-w-[95%] promos-v3-h-[85%] promos-v3-pb-4 promos-v3-mt-[45px]",children:[o.jsxs("div",{className:`
                promos-v3-w-full promos-v3-p-4 
                promos-v3-relative promos-v3-flex promos-v3-bg-cover promos-v3-bg-bottom promos-v3-rounded-lg`,style:{backgroundImage:`url(${d})`},children:[o.jsx("button",{className:"promos-v3-absolute promos-v3-top-4 promos-v3-right-2 sm:promos-v3-right-4 promos-v3-p-3 promos-v3-text-white sm:promos-v3-text-black promos-v3-font-bold",onClick:e,children:"X"}),o.jsxs("div",{className:`promos-v3-bg-white \r
                    promos-v3-mt-11 sm:promos-v3-mt-0\r
                    promos-v3-p-4 promos-v3-w-full promos-v3-rounded-xl \r
                    promos-v3-flex \r
                    promos-v3-flex-col\r
                    sm:promos-v3-flex-row \r
                    promos-v3-justify-center \r
                    promos-v3-items-center`,children:[o.jsx("img",{className:`promos-v3-top-4 sm:promos-v3-top-2\r
                            promos-v3-absolute sm:promos-v3-relative\r
                            promos-v3-w-[90px] sm:promos-v3-w-[120px]`,src:l,alt:"logo"}),o.jsxs("div",{className:`promos-v3-flex promos-v3-flex-col \r
                            promos-v3-justify-start\r
                            sm:promos-v3-justify-center \r
                            promos-v3-items-start\r
                            sm:promos-v3-items-center promos-v3-w-full`,children:[o.jsx("h2",{className:`promos-v3-font-semibold \r
                            promos-v3-my-4 promos-v3-pt-4 sm:promos-v3-pt-0\r
                            promos-v3-text-xl promos-v3-w-full promos-v3-text-center`,children:v}),o.jsxs("p",{className:"promos-v3-mb-2 promos-v3-text-sm",children:[o.jsx("strong",{children:"Fecha de sorteo:"})," ",x()]}),o.jsxs("p",{className:"promos-v3-mb-2 promos-v3-text-sm",children:[o.jsx("strong",{children:"Cliente:"})," ",t]}),o.jsxs("p",{className:"promos-v3-mb-2 promos-v3-text-sm",children:[o.jsx("strong",{children:"Alias de usuario:"})," ",s]}),o.jsxs("p",{className:"promos-v3-text-sm",children:[o.jsx("strong",{children:"Emisión de cartilla:"})," ",j()]})]})]})]}),o.jsxs("div",{className:"promos-v3-px-4 promos-v3-pt-6 promos-v3-gap-1 promos-v3-flex promos-v3-flex-col promos-v3-items-center",children:[o.jsx("h3",{className:"promos-v3-text-base promos-v3-text-center promos-v3-font-bold",children:"CARTILLA DE OPCIONES CANJEADAS"}),o.jsxs("p",{children:["Total de opciones: ",o.jsx("strong",{children:c.length})]})]}),o.jsx("div",{className:"promos-v3-px-4",children:o.jsx(V,{line:"gray"})}),o.jsx("div",{style:{height:`${m}px`},className:"promos-v3-w-full promos-v3-px-4 promos-v3-overflow-y-auto",children:o.jsx("div",{className:"content__scrollbar",children:c.map(f=>o.jsx("p",{className:"promos-v3-flex promos-v3-float-left promos-v3-w-1/3 promos-v3-p-2 promos-v3-justify-center promos-v3-items-center",children:f},f))})})]})]})};var zo={exports:{}};(function(e,t){(function(s,r){r()})(z,function(){function s(i,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}function r(i,l,v){var d=new XMLHttpRequest;d.open("GET",i),d.responseType="blob",d.onload=function(){p(d.response,l,v)},d.onerror=function(){console.error("could not download file")},d.send()}function n(i){var l=new XMLHttpRequest;l.open("HEAD",i,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function c(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(l)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof z=="object"&&z.global===z?z:void 0,m=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),p=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!m?function(i,l,v){var d=a.URL||a.webkitURL,x=document.createElement("a");l=l||i.name||"download",x.download=l,x.rel="noopener",typeof i=="string"?(x.href=i,x.origin===location.origin?c(x):n(x.href)?r(i,l,v):c(x,x.target="_blank")):(x.href=d.createObjectURL(i),setTimeout(function(){d.revokeObjectURL(x.href)},4e4),setTimeout(function(){c(x)},0))}:"msSaveOrOpenBlob"in navigator?function(i,l,v){if(l=l||i.name||"download",typeof i!="string")navigator.msSaveOrOpenBlob(s(i,v),l);else if(n(i))r(i,l,v);else{var d=document.createElement("a");d.href=i,d.target="_blank",setTimeout(function(){c(d)})}}:function(i,l,v,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof i=="string")return r(i,l,v);var x=i.type==="application/octet-stream",j=/constructor/i.test(a.HTMLElement)||a.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||x&&j||m)&&typeof FileReader<"u"){var h=new FileReader;h.onloadend=function(){var N=h.result;N=f?N:N.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=N:location=N,d=null},h.readAsDataURL(i)}else{var b=a.URL||a.webkitURL,_=b.createObjectURL(i);d?d.location=_:location.href=_,d=null,setTimeout(function(){b.revokeObjectURL(_)},4e4)}});a.saveAs=p.saveAs=p,e.exports=p})})(zo);var nt=zo.exports;function at(e){const t=atob(e),s=new Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);const r=new Uint8Array(s),n=new Blob([r],{type:"application/pdf"}),c=`Opciones_${new Date().valueOf()}.pdf`;nt.saveAs(n,c)}const it=({showToast:e,setShowToast:t})=>(u.useEffect(()=>{if(e){const s=setTimeout(()=>{t(!1)},5e3);return()=>{clearTimeout(s)}}},[e,t]),o.jsx("div",{className:`${e?"promos-v3-opacity-100 promos-v3-translate-y-0":"promos-v3-opacity-0 promos-v3-translate-y-5"} promos-v3-fixed promos-v3-z-[99] promos-v3-bottom-4 promos-v3-right-2 promos-v3-w-80 promos-v3-p-4 promos-v3-bg-gray-900 promos-v3-text-white promos-v3-rounded promos-v3-shadow-lg promos-v3-transition-transform promos-v3-duration-300 promos-v3-transform`,children:"¡Listo! También recibirás un correo"})),mt=({disabled:e,extraClass:t})=>{const[s,r]=u.useState(null),[n,c]=u.useState(!1),{isCustomModal:a,openCustomModal:m,closeCustomModal:p}=Is(),{promoCode:i}=g(),{idPromotion:l}=$[i],[v,d]=u.useState(!1),[x,j]=u.useState(!1),[f]=no(ao);let h=!1;window.location.origin=="https://mobile.casinoatlanticcity.com"&&(h=!0);const b=u.useCallback(()=>{d(!0),h?tt(f,l).then(_=>{r(_),m(),c(!0)}).finally(()=>{d(!1)}):st(f,l).then(_=>{_?at(_.cartillaBase64):j(!0)}).finally(()=>{d(!1)})},[]);return o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:T("btn promos-v3-w-auto promos-v3-uppercase promos-v3-text-black btn-promos-primary ",e&&"btn-promos-disabled",t),onClick:b,disabled:e,children:[o.jsx("div",{className:"promos-v3-mr-2",children:v?o.jsx(o.Fragment,{children:o.jsx(Oo,{width:"24",height:"24",classNames:"promos-v3-animate-spin"})}):o.jsx(o.Fragment,{children:o.jsx(Qe,{width:"24",height:"24",color:e?"rgba(255, 255, 255, .4)":"#000"})})}),h?"VER":"DESCARGAR"," CARTILLA"]}),n&&o.jsx(it,{showToast:n,setShowToast:c}),a&&o.jsx(rt,{onClose:p,...s})]})},ct="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/optionTicket.png",lt=({bgColor:e,opciones:t})=>{const{promoCode:s}=g(),{ticketLogo:r}=$[s],n=!!(t&&t>0);return o.jsxs("div",{className:`${e} sm:promos-v3-w-1/2 promos-v3-w-full promos-v3-py-4 promos-v3-px-2 promos-v3-flex promos-v3-flex-col promos-v3-justify-center promos-v3-items-center promos-v3-rounded-lg promos-v3-text-center sm:promos-v3-mt-[44px] sm:promos-v3-p-4`,children:[o.jsx("p",{className:"promos-v3-text-white sm:promos-v3-text-[18px]",children:"Opciones canjeadas para el sorteo"}),o.jsxs("div",{className:`promos-v3-flex promos-v3-gap-[10px] promos-v3-justify-center promos-v3-my-[16px] ${n?"sm:promos-v3-my-[24px]":"sm:promos-v3-my-[32px]"}`,children:[o.jsxs("div",{className:"promos-v3-bg-no-repeat promos-v3-bg-contain promos-v3-relative promos-v3-bg-center promos-v3-w-[80px] sm:promos-v3-w-[120px]",style:{backgroundImage:`url(${ct})`},children:[o.jsx("div",{className:T("promos-v3-absolute promos-v3-rounded-[4px] promos-v3-top-[11px] promos-v3-bottom-[10.5px] promos-v3-left-[22px] promos-v3-right-2 md:promos-v3-top-[5.6px] md:promos-v3-bottom-[5.6px] md:promos-v3-left-8 md:promos-v3-right-3",`bg-gradient-canje-option-ticket-${s}`)}),o.jsx("img",{src:r,alt:"",className:"promos-v3-w-[35px] sm:promos-v3-w-[52.8px] promos-v3-absolute sm:promos-v3-right-[24.8px] promos-v3-right-[16.53px] promos-v3-top-[7.5px] sm:promos-v3-top-[2.4px]"})]}),o.jsx("h3",{className:"promos-v3-text-white promos-v3-text-[39px] sm:promos-v3-text-[44px] promos-v3-font-extrabold",id:"opcionesCanjeadas","data-testid":"opcionesCanjeadas","data-test-value":t??0,children:G(t??0)})]}),n&&o.jsxs("p",{className:"promos-v3-text-white promos-v3-mx-[14px] sm:promos-v3-mx-[24] promos-v3-mb-[16px] promos-v3-text-[12px] sm:promos-v3-text-[14px] promos-v3-py-1 promos-v3-px-2 sm:promos-v3-p-0 ",children:[o.jsx("strong",{className:"promos-v3-text-white promos-v3-text-[12px] sm:promos-v3-text-[14px]",children:"¡Mucha suerte!"}),o.jsx("br",{}),"El sorteo es a partir de las ","10:00 PM","."]}),o.jsx(mt,{extraClass:y.btnDescargar,disabled:!n})]})},pt=({LogoSuenos:e})=>{const t=u.useRef(null),{throwConfetti:s,stopConfetti:r}=As(),{promoCode:n,typePromotion:c}=g(),m=I().getQueryData([c,n,"canjes"]);return u.useEffect(()=>{if(m&&t.current)return s(t.current),setTimeout(()=>{r()},2e3),()=>{r()}},[m,r,s]),o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:`promos-v3-text-center promos-v3-mb-4 sm:promos-v3-mb-8 promos-v3-font-bold ${n==="suenos-navidad"?"promos-v3-text-[#000]":"promos-v3-text-[#4f4f4f]"} promos-v3-text-xl sm:promos-v3-text-2xl`,children:"Próximo sorteo"}),o.jsxs("div",{className:"promos-v3-flex promos-v3-flex-col sm:promos-v3-flex-row promos-v3-gap-4 sm:promos-v3-gap-6 ",children:[o.jsx(et,{}),o.jsx(lt,{bgColor:`bg-gradient-box-opciones-${n}`,imgurl:e,opciones:m.opcionesCanjeadas})]})]})},dt="tabCanjeContainer",vt=({isLoading:e})=>(g(),o.jsx(o.Fragment,{children:e?o.jsx(Y,{}):o.jsx(to,{color:"#f5f5f5",extraClassName:"!promos-v3-pt-6 sm:!promos-v3-pt-8",outerExtraClassName:"promos-v3-flex-1 !promos-v3-items-start",containerId:dt,children:o.jsx(pt,{LogoSuenos:ks})})})),Lo=e=>e.length===1?e[0]:e.length===2?e.join(" y "):e.slice(0,-1).join(", ")+` y ${e[e.length-1]}`,Fo=(e,t)=>{if(t===1)return e;const s=e.charAt(e.length-1),r=e.charAt(e.length-2);return s==="s"||s==="x"?r==="á"||r==="é"||r==="í"||r==="ó"||r==="ú"?e:e+"es":s==="n"||s==="l"||s==="r"||s==="d"||s==="z"||s==="j"||s==="y"?e+"es":e.endsWith("ión")?e.slice(0,-1)+"es":e+"s"};//! Por aniversario, la estructura de los puestos cambió.
//! Se coloca la data en duro mientras dure este brief.
const P=[{dias_canje:["Todos los jueves"],sorteos:[{frecuencia:["Todos los jueves a las "],horario:"10:00 PM",premios:[]}]}],ut=({diaSemanaSorteo:e,diaSemanaCanje:t,horaSorteo:s})=>{const{promoCode:r,typePromotion:n}=g(),{bgAward:c}=$[r],m=I().getQueryData([n,r,"informacion"]);return m!=null&&m.puestos&&(P[0].sorteos[0].premios=m.puestos,P[0].dias_canje[0]="Todos los "+t,P[0].sorteos[0].frecuencia[0]="Todos los "+e,P[0].sorteos[0].horario=s),P.length===1?o.jsx(to,{url:c,children:o.jsx("div",{className:"promos-v3-relative promos-v3-z-10",children:P.map((p,i)=>o.jsx(So,{sorteo_grupo:p},i))})}):o.jsx("div",{className:"promos-v3-relative promos-v3-z-10",children:o.jsx("div",{className:"promos-v3-flex promos-v3-w-full promos-v3-max-w-[1108px] promos-v3-mx-auto promos-v3-gap-2 md:promos-v3-gap-4 promos-v3-overflow-auto promos-v3-py-4 promos-v3-px-4",children:P.map((p,i)=>o.jsx("div",{className:"promos-v3-flex-1 promos-v3-min-w-[326px] promos-v3-min-h-full",children:o.jsx("div",{className:"promos-v3-rounded-3xl promos-v3-overflow-hidden promos-v3-h-full promos-v3-flex",children:o.jsx(to,{url:c,extraClassName:"promos-v3-flex promos-v3-flex-1 promos-v3-h-full",outerExtraClassName:"promos-v3-w-full",children:o.jsx(So,{sorteo_grupo:p},i)})})}))})})};function So({sorteo_grupo:e}){const t=Lo(e.dias_canje);return o.jsxs("div",{className:"md:promos-v3-px-4 promos-v3-flex promos-v3-flex-col promos-v3-flex-1",children:[o.jsx(as,{day:t}),o.jsx(V,{}),o.jsxs("div",{className:"promos-v3-flex-1 promos-v3-flex promos-v3-flex-col promos-v3-items-center promos-v3-justify-center",children:[o.jsx("div",{className:"promos-v3-flex promos-v3-flex-col promos-v3-justify-center promos-v3-items-center promos-v3-gap-4",children:o.jsx("h4",{className:"promos-v3-text-white promos-v3-font-bold promos-v3-text-2xl sm:promos-v3-text-[28px] promos-v3-leading-7 ",children:"Sorteos"})}),o.jsx("div",{children:e.sorteos.map((s,r)=>o.jsx(xt,{sorteo:s},r))})]}),o.jsx(V,{}),o.jsx("div",{className:"promos-v3-flex promos-v3-items-center promos-v3-my-2 promos-v3-justify-center",children:o.jsx("p",{className:"promos-v3-text-white promos-v3-text-center promos-v3-font-bold promos-v3-text-base",children:"¡Uno de los premios puede ser tuyo!"})})]})}function xt({sorteo:e}){const t=`${B(Lo(e.frecuencia))} ${e.horario}`,s=e.premios.reduce((c,a)=>c+a.cantidad,0),r=e.premios.length>=3,n=r?[...e.premios].reverse():e.premios;return o.jsxs("div",{className:"promos-v3-mt-4",children:[o.jsxs("div",{className:"promos-v3-flex promos-v3-flex-col promos-v3-justify-center promos-v3-items-center promos-v3-gap-2",children:[o.jsx("h5",{className:"promos-v3-text-white promos-v3-font-bold promos-v3-text-[20px] promos-v3-leading-7",children:t}),e.info_extra&&o.jsx("h6",{className:"promos-v3-text-white promos-v3-font-bold promos-v3-text-[16px] promos-v3-leading-7",children:e.info_extra}),o.jsxs("p",{className:"promos-v3-text-white promos-v3-text-[16px] promos-v3-leading-7",children:[s," ",Fo("ganador",s)]})]}),o.jsx("div",{className:T("promos-v3-flex promos-v3-w-full promos-v3-max-w-[630px] promos-v3-gap-2 md:promos-v3-gap-6 promos-v3-justify-center promos-v3-items-center promos-v3-mx-auto promos-v3-mt-4",r&&"promos-v3-flex-row-reverse promos-v3-flex-wrap-reverse"),children:n.map((c,a)=>o.jsx(ft,{premio:c},a))})]})}function ft({premio:e}){return o.jsxs("div",{className:`${W["award-item"]} promos-v3-flex promos-v3-flex-col promos-v3-justify-center promos-v3-items-center`,style:{backgroundImage:`url(${Ao})`},children:[o.jsx("p",{className:"promos-v3-text-white promos-v3-font-extrabold promos-v3-text-[38px] promos-v3-leading-[0.7] promos-v3-mt-[18px]",children:e.cantidad}),o.jsxs("p",{className:"promos-v3-text-white promos-v3-font-bold promos-v3-text-sm promos-v3-mb-2",children:[Fo("Ganador",e.cantidad)," de"]}),o.jsxs("p",{className:"promos-v3-text-black promos-v3-font-extrabold promos-v3-text-[25px]",children:["S/ ",G(e.monto)]})]})}const ht=({isLoading:e})=>{const{promoCode:t,typePromotion:s}=g(),r=I(),n=r.getQueryData([s,t,"informacion"]),c=r.getQueryData([s,t]);if(e)return o.jsx(Y,{});const{diaSemana:a,dia:m,horaMinutos:p,mes:i}=S(n==null?void 0:n.periodoDeAcumuacion[0].fechaInicio),{diaSemana:l,dia:v,horaMinutos:d,mes:x}=S(n==null?void 0:n.periodoDeAcumuacion[0].fechaFin),{diaSemanaPlural:j}=S(n.diaDeCanje),{diaSemanaPlural:f,amPm:h,horaMinutos:b}=S(c.fechaInicioSorteo),_=b+" "+h,N=`${B(a)} ${m} de ${i} a las ${p} hrs. hasta el ${l} ${v} de ${x} a las ${d} hrs.`,C=n.rangoCanje[0].min,w=n.rangoCanje[0].max;return o.jsxs(o.Fragment,{children:[o.jsx($o,{children:o.jsxs("div",{className:"promos-v3-mt-6 promos-v3-mb-6 sm:promos-v3-mt-8",children:[o.jsx(uo,{title:"¿Cómo participar?",extraClassName:"!promos-v3-text-xl sm:!promos-v3-text-2xl"}),o.jsx("div",{className:"sm:promos-v3-pt-4 promos-v3-pb-8",children:o.jsxs(pe,{children:[o.jsx(J,{id:1,bgColor:"vip-royal",children:"Juega y acumula puntos en tus máquinas favoritas."}),o.jsxs(J,{id:2,bgColor:"vip-royal",children:["Canjea tus opciones ",o.jsxs("strong",{children:["todos los ",j]}),", cada ",n.puntos," ",n.puntos==1?"punto":"puntos"," ","equivalen a ",n.opciones," ",n.opciones==1?"opción":"opciones","."]}),o.jsxs(J,{id:3,bgColor:"vip-royal",children:["Recuerda que el canje de tus opciones y los sorteos son todos los ",f,"."]})]})}),o.jsx(uo,{title:"A tener en cuenta:"}),o.jsxs("ul",{className:"promos-v3-list-disc promos-v3-pl-6 promos-v3-mb-4",children:[o.jsx("li",{children:o.jsxs("p",{className:"promos-v3-text-base sm:promos-v3-text-lg",children:[o.jsxs("strong",{className:"promos-v3-text-[#535353] promos-v3-text-base sm:promos-v3-text-lg",children:["Acumula puntos:"," "]})," ","solo con tu saldo efectivo. El saldo bono no cuenta."]})}),o.jsx("li",{children:o.jsxs("p",{className:"promos-v3-text-base sm:promos-v3-text-lg",children:[o.jsxs("strong",{className:"promos-v3-text-[#535353] promos-v3-text-base sm:promos-v3-text-lg",children:["Periodo de acumulación:"," "]}),N]})}),o.jsx("li",{children:o.jsxs("p",{className:"promos-v3-text-base sm:promos-v3-text-lg",children:[o.jsxs("strong",{className:"promos-v3-text-[#535353] promos-v3-text-base sm:promos-v3-text-lg",children:["Canje:"," "]})," ","Mínimo es de ",C," opciones y máximo de ",w," ","opciones."]})}),o.jsx("li",{children:o.jsxs("p",{className:"promos-v3-text-base sm:promos-v3-text-lg",children:[o.jsxs("strong",{className:"promos-v3-text-[#535353] promos-v3-text-base sm:promos-v3-text-lg",children:["Exclusiones casino online:"," "]})," ","Juegos de póker, ruleta, juegos de mesa, mesas en vivo, apuestas deportivas y deportes virtuales."]})})]}),o.jsx(fe,{})]})}),o.jsx(ut,{diaSemanaSorteo:f,diaSemanaCanje:j,horaSorteo:_})]})},H="vip-royal",_t=()=>{const{bgHead:e,bgHeadMobile:t,logo:s,tabs:r,title:n,subtitle:c,type:a}=$[H],{getterTabName:m}=Eo(),{sorteoBodyQuery:p}=Ps(H,m(r)),i=he(H);return i.isLoading||!i.data?o.jsx(Y,{full:!0}):i.isError||p.isError?o.jsx(de,{}):o.jsx("div",{className:"promos-v3-root",children:o.jsxs(Jo,{promoCode:H,hasMultipliers:!0,typePromotion:a,children:[o.jsx(ve,{promoName:n,subtitle:c,promoLogo:s,background:e,backgroundMobile:t,isNew:i.data.esNuevo}),o.jsx($o,{extraClass:"promos-v3-rounded-t-2xl sm:promos-v3-rounded-none promos-v3-bg-white promos-v3-pt-2",innerExtraClass:"!promos-v3-px-0 sm:!promos-v3-px-4",children:o.jsx(ue,{children:r.map(({text:l},v)=>o.jsx(xe,{index:v,title:l},v))})}),o.jsx(oo,{index:0,children:o.jsx(ht,{isLoading:p.isLoading})}),o.jsx(oo,{index:1,children:o.jsx(vt,{isLoading:p.isLoading})}),o.jsx(oo,{index:2,children:o.jsx(Ts,{isLoading:p.isLoading})}),o.jsx(_e,{children:o.jsx(ge,{})})]})})},gt=new Ce;Xo.createRoot(document.getElementById("root")).render(o.jsx(oe.StrictMode,{children:o.jsxs(je,{client:gt,children:[o.jsx(Ne,{}),o.jsx(ee,{children:o.jsx(se,{children:o.jsx(_t,{})})})]})}));
