import{b as i,g as f,h as g,i as b,u as N,j as o,p as x,a as j}from"./global.js";import{u as S}from"./useQuery.js";const _="",w=(a,t)=>s=>{if(!s)throw new Error(`"storageKey" must be a nonempty string, but "${s}" was passed.`);const n=a.getItem(t+s);let e=null;n!==null&&(e=JSON.parse(n));const[m,l]=i.useState(e);return i.useEffect(()=>{a.setItem(t+s,JSON.stringify(m))},[m,s]),[m,l]},C=w(localStorage,_),E="player_id",M=async(a,t)=>{try{const{idPromotion:s}=f[a],{national_id:n}=g(),{data:e}=await b.get(`${t}/torneos/${s}/premios?numero_documento=${n}`);return e.data}catch(s){throw console.error("Error en getInformacionTorneo:",s),s}},T=async(a,t)=>{try{const{idPromotion:s}=f[a],{national_id:n}=g(),{data:e}=await b.get(`${t}/torneos/${s}/resultados?numero_documento=${n}`);return e.data}catch(s){throw console.error("Erro en peticion",s),s}},I=async(a,t)=>{try{const{idPromotion:s}=f[a],{national_id:n}=g(),{data:e}=await b.get(`${t}/torneos/${s}/avances?numero_documento=${n}`);return e.data}catch(s){throw console.error("Error en peticion",s),s}},$=(a,t)=>{const[s]=C(E),n=["torneo",a,t],e=()=>M(a,s),m=()=>T(a,s),l=()=>I(a,s);return{torneoBodyQuery:S(n,()=>{switch(t){case"informacion":return e();case"avance":return l();case"resultados":return m();default:throw new Error("Unimplemented tab")}},{refetchOnWindowFocus:!1})}},h={"table__item-mySpot":"_table__item-mySpot_1qyel_2"},P="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/trophy-disc.svg",R="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/mesas_disc.svg",Q="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/mega_disc.svg",y="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/trophy-1.svg",O="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/trophy-1-mesas.svg",L="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/trophy-2.svg",A="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/trophy-2-mesas.svg",z="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/trophy-3-mesas.svg",F="https://ctp-cms.s3.amazonaws.com/CMS_COL/QA/PROMOCIONES/assets/trophy-3.svg",k=({values:a,orderBy:t})=>{const[s,n]=i.useState(a);return i.useEffect(()=>{if(t){if(t.fieldType==="string")throw Error("ORDER BY STRING NOT IMPLEMENTED");if(t.fieldType==="number"){const e=[...s].sort((m,l)=>{let v=0;const u=t.field,c=m[u],d=l[u];return c&&d&&(v=c-d),t.order==="desc"&&(v=v*-1),v});n(e)}}},[t]),{list:s}},D={"mega-torneo":Q,"torneo-mesas":R,"top-atlantic":P},J=i.memo(({withNumber:a=!1,items:t,tab:s="avance",orderBy:n})=>{const{promoCode:e}=N(),{torneoBodyQuery:m}=$(e,s),{list:l}=k({values:t,orderBy:n}),v=r=>{switch(e){case"sorteo-crucero":return r<=10?O:y;case"torneo-mesas":return"";default:return""}},u=i.useCallback(r=>{if(e=="sorteo-crucero")return v(r);switch(r){case 1:return e=="torneo-mesas"?O:y;case 2:return e=="torneo-mesas"?A:L;case 3:return e=="torneo-mesas"?z:F;default:return""}},[]);if(!m.data||m.isLoading)return o.jsx(o.Fragment,{});const c=m.data,d=((c==null?void 0:c.avancePersonal)&&c.avancePersonal[0].posicion)??(c==null?void 0:c.posicion);return o.jsx("div",{className:"promos-v3-py-2 sm:promos-v3-py-6 promos-v3-pl-2 sm:promos-v3-pl-4 promos-v3-pr-2 promos-v3-bg-white promos-v3-rounded-b-2xl",children:o.jsx("div",{className:"content__scrollbar promos-v3-max-h-[380px] sm:promos-v3-max-h-[420px] promos-v3-flex promos-v3-flex-col promos-v3-gap-2 sm:promos-v3-gap-4",children:l.map((r,p)=>!(r!=null&&r.alias)&&!(r!=null&&r.puntos)?o.jsx(o.Fragment,{children:o.jsxs("div",{className:"promos-v3-flex promos-v3-rounded-lg promos-v3-w-full promos-v3-min-h-[68px] promos-v3-items-center promos-v3-border",children:[o.jsx("div",{className:`${h.table__disc} promos-v3-mr-3 promos-v3-bg-contain promos-v3-flex promos-v3-w-[56px] promos-v3-relative promos-v3-bg-no-repeat promos-v3-h-[69px] promos-v3-justify-center promos-v3-items-center promos-v3-opacity-70`,children:o.jsx("p",{className:"promos-v3-text-white promos-v3-font-bold",children:p+1})}),o.jsx("div",{className:"promos-v3-flex-1",children:o.jsx("p",{className:"promos-v3-text-center promos-v3-flex promos-v3-flex-col promos-v3-items-start md:promos-v3-ml-8",children:o.jsxs("span",{className:"promos-v3-block promos-v3-text-sm promos-v3-text-start md:promos-v3-text-lg",children:["Este premio ",o.jsx("br",{className:"sm:promos-v3-hidden"}),"puede ser tuyo"]})})}),o.jsx("div",{className:"promos-v3-flex-1 promos-v3-hidden sm:promos-v3-block",children:o.jsx("p",{className:"promos-v3-text-left sm:promos-v3-text-center",children:" "})}),o.jsx("div",{className:"promos-v3-flex-1",children:o.jsx("p",{className:"promos-v3-text-center",children:(r==null?void 0:r.premio)&&o.jsxs("strong",{children:["S/ ",typeof r.premio=="number"?x(r.premio):r.premio]})})})]},`${s}-empty-${p}`)}):o.jsxs("div",{id:p+1===d?"mySpot":"",className:`promos-v3-flex promos-v3-rounded-lg promos-v3-w-full promos-v3-min-h-[68px] promos-v3-items-center promos-v3-border promos-v3-box-content ${p+1===d?`promos-v3-border-solid promos-v3-border-2 promos-v3-border-black ${h["table__item-mySpot"]}`:""}`,children:[a&&e!="sorteo-crucero"?p==0||p==1||p===2?o.jsx("div",{className:"promos-v3-rounded-l-lg promos-v3-mr-3 sm:promos-v3-mr-0 bg-contain promos-v3-flex promos-v3-w-[56px] promos-v3-relative promos-v3-bg-no-repeat promos-v3-h-[68px]",style:{backgroundImage:`url(${u(p+1)})`}}):o.jsx("div",{className:`${h.table__disc} promos-v3-mr-3 sm:promos-v3-mr-0 promos-v3-bg-contain promos-v3-flex promos-v3-w-[56px] promos-v3-relative promos-v3-bg-no-repeat promos-v3-h-[68px] promos-v3-rounded-l-lg promos-v3-justify-center promos-v3-items-center`,style:{backgroundImage:`url(${D[e]})`},children:o.jsx("p",{className:"promos-v3-text-white promos-v3-font-bold",children:p+1})}):o.jsx("div",{className:`${h.table__disc} promos-v3-mr-3 sm:promos-v3-mr-0 promos-v3-flex promos-v3-w-[56px] promos-v3-relative promos-v3-bg-no-repeat promos-v3-h-[68px] promos-v3-rounded-l-lg promos-v3-justify-center promos-v3-items-center bg-gradient-${e}-winner`,children:o.jsx("p",{className:"promos-v3-text-[#000] promos-v3-font-bold",children:p+1})}),o.jsx("div",{className:"promos-v3-flex-1",children:o.jsx("p",{className:"promos-v3-text-center promos-v3-flex promos-v3-flex-col promos-v3-items-start sm:promos-v3-items-center",children:r.alias&&o.jsxs(o.Fragment,{children:[o.jsx("strong",{className:"promos-v3-text-base sm:promos-v3-text-lg promos-v3-text-[#111] promos-v3-text-left",children:r.alias}),o.jsxs("span",{className:"promos-v3-block sm:promos-v3-hidden promos-v3-text-sm",children:[r.puntos&&x(r.puntos)," ptos."]})]})})}),r.puntos&&o.jsx("div",{className:"promos-v3-flex-1 promos-v3-hidden sm:promos-v3-block",children:o.jsxs("p",{className:j(e!="sorteo-crucero"?"":"promos-v3-text-[#000] promos-v3-font-bold","promos-v3-text-left sm:promos-v3-text-center promos-v3-text-base sm:promos-v3-text-lg"),children:[r.puntos&&x(r.puntos)," ptos."]})}),r.premio&&o.jsx("div",{className:"promos-v3-flex-1",children:o.jsx("p",{className:"promos-v3-text-center",children:o.jsxs("strong",{className:"promos-v3-text-base sm:promos-v3-text-lg promos-v3-text-[#111]",children:["S/",typeof r.premio=="number"?x(r.premio):r.premio]})})})]},r.alias))})})});export{J as T,$ as a,E as i,C as u};
